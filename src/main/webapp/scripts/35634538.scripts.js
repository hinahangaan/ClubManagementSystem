"use strict";angular.module("cmsApp",["ui","ui.bootstrap","ngResource"]).config(["$routeProvider","$locationProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cmsAppDev",["cmsApp","ngMockE2E"]).run(["$httpBackend",function(a){a.whenGET(/^views\//).passThrough(),a.whenGET("tables").passThrough(),a.expectGET("tables").respond("")}]),angular.module("cmsApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("cmsApp").directive("tableUnit",function(){return{templateUrl:"views/directives/tableUnit.html",restrict:"E",scope:{table:"="},controller:["$scope","$element","$attrs","$transclude","$dialog",function(a,b,c,d,e){a.opts={backdrop:!0,keyboard:!0,backdropClick:!1,templateUrl:"views/directives/addOrder.html",controller:"AddorderCtrl",tableName:a.table.name},a.openAddOrder=function(){var b=e.dialog(a.opts);b.open().then(function(b){b&&angular.forEach(b.items,function(b){a.table.currentCustomer.bill+=b.amount})})}}],link:function(){}}}),angular.module("cmsApp").directive("tableList",function(){return{templateUrl:"views/directives/tableList.html",restrict:"E",controller:["$scope","$element","$attrs","tableRepo",function(a,b,c,d){d.query(),a.tables=[];var e={name:"T1",vacant:"true",currentCustomer:{id:2,bill:0,waiter:"Allan"},customers:[{id:1,bill:40,waiter:"Allan"}]};a.tables.push(e);for(var f=2;55>f;f++)e={name:"T"+f,vacant:"false",currentCustomer:{id:2,bill:0,waiter:"Allan"},customers:[{id:1,bill:40,waiter:"Allan"}]},a.tables.push(e);a.vips=[];for(var f=1;6>f;f++){var g={name:"V"+f,type:"vip",vacant:"false",currentCustomer:{id:2,bill:0,waiter:"Allan"},customers:[{id:1,bill:40,waiter:"Allan"}]};a.vips.push(g)}}],link:function(){}}}),angular.module("cmsApp").controller("AddorderCtrl",["$scope","dialog",function(a,b){a.table=b.options.tableName,a.orNumbers=["1111","1112","1113","1114","1115","1116"],a.ladies=["Akira","Ashley","Tiffany"],a.itemTypes=[{name:"SML",price:40,showLady:"false"},{name:"SMB",price:40,showLady:"false"},{name:"RH",price:40,showLady:"false"},{name:"SML-LD-D",price:300,showLady:"true"},{name:"SML-LD-S",price:180,showLady:"true"}],a.waiters=["Ryan","Jo","Allan"],a.order={},a.order.waiter=a.waiters[0];var c={type:a.itemTypes[0],price:40,qty:1,amount:40};a.order.items=[c],a.order.total=c.price,a.itemChanged=function(a){a.amount=a.type.price*a.qty,a.price=a.type.price,"false"===a.type.showLady&&(a.lady=""),this.calculateTotal()},a.calculateAmount=function(a){a.amount=a.price*a.qty,this.calculateTotal()},a.calculateTotal=function(){a.order.total=0,angular.forEach(a.order.items,function(b){a.order.total+=b.amount})},a.addItem=function(){var b={type:a.itemTypes[0],price:40,qty:1,amount:40};a.order.items.push(b),this.calculateTotal()},a.removeItem=function(b){a.order.items.splice(b,1),this.calculateTotal()},a.addOrder=function(){b.close(a.order)},a.close=function(){b.close()}}]),angular.module("cmsApp").factory("tableRepo",["$resource",function(a){return a("tables/:id",{id:"@id"})}]);